<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Our Memories</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes float {
      0% { transform: translateY(0) scale(1); opacity: 0.8; }
      100% { transform: translateY(-120vh) scale(1.4); opacity: 0; }
    }
    .heart { position: absolute; bottom: -60px; fill: rgba(236, 72, 153, 0.25); animation: float linear infinite; }
    @keyframes fadeInUp {
      0% { opacity: 0; transform: translateY(30px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    .fade-in { animation: fadeInUp 1s ease forwards; }
  </style>
</head>
<body class="min-h-screen flex flex-col bg-gradient-to-b from-pink-50 via-pink-100 to-pink-200 text-gray-800 font-sans px-3 sm:px-6 py-6 relative overflow-hidden">

  <!-- Floating hearts -->
  <svg class="heart left-1/4 w-5 h-5 sm:w-6 sm:h-6" style="animation-duration: 7s;" viewBox="0 0 24 24">
    <path d="M12 21s-6.5-4.35-10-9.05C-1.1 7.54 1.75 2 7.5 2c2.4 0 4.6 1.21 5.5 3.09C13.9 3.21 16.1 2 18.5 2 24.25 2 27.1 7.54 22 11.95 18.5 16.65 12 21 12 21z"/>
  </svg>
  <svg class="heart left-2/3 w-7 h-7 sm:w-8 sm:h-8" style="animation-duration: 10s;" viewBox="0 0 24 24">
    <path d="M12 21s-6.5-4.35-10-9.05C-1.1 7.54 1.75 2 7.5 2c2.4 0 4.6 1.21 5.5 3.09C13.9 3.21 16.1 2 18.5 2 24.25 2 27.1 7.54 22 11.95 18.5 16.65 12 21 12 21z"/>
  </svg>

  <!-- Hidden Audio (shared across all pages) -->
  <audio id="bg-music" loop>
    <source src="assets/nothing.mp3" type="audio/mpeg">
  </audio>

<div class="relative z-10 min-h-screen fade-in">
  <!-- Back button -->
  <a href="home.html" class="self-start mb-4 inline-flex items-center text-pink-700 hover:text-pink-900 transition text-sm sm:text-base">
    <svg class="w-5 h-5 sm:w-6 sm:h-6 mr-2" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/>
    </svg>
    Back
  </a>

  <!-- Header -->
  <div class="text-center mb-6 sm:mb-10">
    <h2 class="text-xl sm:text-3xl md:text-5xl font-bold text-pink-700 drop-shadow-md">Our Journey Together</h2>
    <p class="mt-1 sm:mt-3 text-gray-600 text-sm sm:text-lg md:text-xl">A collection of moments that shaped our story üíï</p>
  </div>
  
  <!-- Memory Grid -->
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-6 max-w-6xl mx-auto">
    <div onclick="openModal(0)" class="group relative cursor-pointer rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transform hover:scale-105 transition">
      <img src="assets/03.jpg" alt="Museum Date" class="w-full h-40 sm:h-64 object-cover"/>
      <div class="absolute inset-0 bg-pink-900/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition">
        <h3 class="text-white text-sm sm:text-lg font-semibold">Museum Date</h3>
      </div>
    </div>

    <div onclick="openModal(1)" class="group relative cursor-pointer rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transform hover:scale-105 transition">
      <img src="assets/02.jpg" alt="Birthday Date" class="w-full h-40 sm:h-64 object-cover"/>
      <div class="absolute inset-0 bg-pink-900/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition">
        <h3 class="text-white text-sm sm:text-lg font-semibold">Birthday Date</h3>
      </div>
    </div>

    <div onclick="openModal(2)" class="group relative cursor-pointer rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transform hover:scale-105 transition">
      <img src="assets/01.jpg" alt="Tagaytay Date" class="w-full h-40 sm:h-64 object-cover"/>
      <div class="absolute inset-0 bg-pink-900/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition">
        <h3 class="text-white text-sm sm:text-lg font-semibold">Tagayta Date</h3>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div id="modal" class="hidden fixed inset-0 flex items-center justify-center bg-black/90 z-50 px-2 sm:px-4">
    <!-- Close button -->
    <button onclick="closeModal()" 
      class="absolute top-3 right-3 sm:top-5 sm:right-6 bg-white/90 rounded-full p-2 sm:p-3 shadow-lg 
            hover:bg-pink-200 transition text-base sm:text-lg">‚úï
    </button>

    <!-- Image content with navigation overlay -->
    <div class="relative max-w-md sm:max-w-3xl w-full fade-in">
      <div class="bg-white rounded-lg shadow-2xl p-2 sm:p-4 rotate-[-2deg] hover:rotate-0 transition relative">
        <!-- Main Image -->
        <div class="overflow-y-auto max-h-[70vh]">
          <img id="modalImg" src="" alt="Memory" class="rounded-md shadow-md w-full object-contain"/>
        </div>

        <!-- Navigation Buttons -->
        <button onclick="prevImage()" 
          class="absolute left-2 sm:left-4 top-1/2 -translate-y-1/2 
                bg-pink-600/70 hover:bg-pink-700 text-white rounded-full 
                w-8 h-8 sm:w-12 sm:h-12 flex items-center justify-center 
                text-lg sm:text-2xl shadow-lg z-50">
          ‚ùÆ
        </button>
        <button onclick="nextImage()" 
          class="absolute right-2 sm:right-4 top-1/2 -translate-y-1/2 
                bg-pink-600/70 hover:bg-pink-700 text-white rounded-full 
                w-8 h-8 sm:w-12 sm:h-12 flex items-center justify-center 
                text-lg sm:text-2xl shadow-lg z-50">
          ‚ùØ
        </button>

        <!-- Caption -->
        <div class="mt-3 sm:mt-5 rounded-lg shadow-md px-3 py-2 sm:px-5 sm:py-3 bg-white/90">
          <p id="modalCaption" class="text-center text-pink-800 font-serif italic text-sm sm:text-lg leading-relaxed"></p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  const images = [
    { src: "assets/03.jpg", caption: "Our second museum date ‚Äî valintine's day üíï" },
    { src: "assets/02.jpg", caption: "First sports date in your birthday ‚Äî archery, highshot angle, and new experiences üåç" },
    { src: "assets/01.jpg", caption: "Tagaytay trips before new year and after christmas üå∏" },
  ];
  
  let currentIndex = 0;

  function openModal(index) {
    currentIndex = index;
    document.getElementById("modalImg").src = images[index].src;
    document.getElementById("modalCaption").textContent = images[index].caption;
    document.getElementById("modal").classList.remove("hidden");
  }

  function closeModal() {
    document.getElementById("modal").classList.add("hidden");
  }

  function nextImage() {
    currentIndex = (currentIndex + 1) % images.length;
    openModal(currentIndex);
  }

  function prevImage() {
    currentIndex = (currentIndex - 1 + images.length) % images.length;
    openModal(currentIndex);
  }
</script>

<!-- üîä Sync Music State -->
<script>
  const audio = document.getElementById("bg-music");

  // Restore state
  window.addEventListener("DOMContentLoaded", () => {
    const savedTime = localStorage.getItem("music-time");
    const isPlaying = localStorage.getItem("music-playing");

    if (savedTime) audio.currentTime = parseFloat(savedTime);
    if (isPlaying === "true") {
      audio.play().catch(() => {}); 
    }
  });

  // Keep storage updated every second
  setInterval(() => {
    localStorage.setItem("music-time", audio.currentTime);
    localStorage.setItem("music-playing", (!audio.paused).toString());
  }, 1000);
</script>

</body>
</html>
